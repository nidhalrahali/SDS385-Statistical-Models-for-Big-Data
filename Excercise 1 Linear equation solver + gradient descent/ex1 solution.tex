\documentclass{article}
\usepackage{enumerate}
\begin{document}
\begin{enumerate}
\item
\begin{enumerate}[A]
\item
\begin{eqnarray}
f(\beta)&=&(y-X\beta)^TW(y-X\beta)\nonumber\\
&=&\beta^TX^TWX\beta-2y^TWX\beta+\cdots\nonumber\\
&=&\beta^T X^TWX\beta-2y^TW^TX^T(X^TWX)^{-1}X^TWX\beta+\cdots\nonumber\\
&=&(\beta-(X^TWX)^{-1}X^TWy)^TX^TWX(\beta-(X^TWX)^{-1}X^TWy)+\cdots
\end{eqnarray}
\item
See code
\item
See code
\item
See code
\end{enumerate}
\item
\begin{enumerate}[A]
\item
\begin{eqnarray}
l(\beta)&=&-\log(\prod_i\omega_i^{y_i}(1-\omega_i)^{1-y_i})\nonumber\\
&=&-(\sum_iy_i\log\omega_i+(1-y_i)\log(1-\omega_i))
\end{eqnarray}
\[
\frac{\partial\omega_i}{\partial\beta_j}=\frac{x_{ij}\exp(-x_i\beta)}{(1+\exp(-x_i\beta))^2}=x_{ij}\omega_i(1-\omega_i)
\]
\[
\frac{\partial l}{\partial\beta_j}=\sum_i(\frac{1-y_i}{1-\omega_i}-\frac{y_i}{\omega_i})x_{ij}\omega_i(1-\omega_i)=\sum_i(\omega_i-y_i)x_{ij}
\]
\item
See code.
\item
Write down the taylor expansion of $l$:
\[
l(\beta)=l(\beta_0)+\sum_j\frac{\partial l(\beta_0)}{\partial\beta_j}\beta_j+\frac{1}{2}\sum_{jk}\frac{\partial^2l(\beta_0)}{\partial\beta_k\partial\beta_j}\beta_j\beta_k+\cdots
\]
Compute second order derivative:
\begin{eqnarray}
&&\frac{\partial^2 l}{\partial\beta_k\partial\beta_j}\nonumber\\
&=&\sum_i\omega_i(1-\omega_i)x_{ij}x_{ik}
\end{eqnarray}

$l$ can be written as a quadratic form of diagonal matrix $W$ whose diagonal entries are $\omega_i(1-\omega_i)$
\begin{eqnarray}
l(\beta)&=&l(\beta_0)+\sum_j\frac{\partial l(\beta_0)}{\partial\beta_j}\Delta\beta_j+\frac{1}{2}\sum_{jk}x_{ij}x_{ik}f_i(\beta_0)\Delta\beta_j\Delta\beta_k+\cdots\nonumber\\
&=&\frac{1}{2}\Delta\beta^TX^TWX\Delta\beta+\sum_j\frac{\partial l(\beta_0)}{\partial\beta_j}\Delta\beta_j+\cdots\nonumber\\
&=&\frac{1}{2}(z-X\Delta\beta)^TW(z-X\Delta\beta)+\cdots
\end{eqnarray}
Determine $z$:
\begin{eqnarray}
z^TWX&=&-\frac{\partial l(\beta_0)}{\partial\beta_i}\nonumber\\
\sum_iz_i\omega_i(1-\omega_i)x_{ij}&=&-\sum_i(\omega_i-y_i)x_{ij}\nonumber\\
z_i&=&\frac{y_i-\omega_i}{\omega_i(1-\omega_i)}
\end{eqnarray}
\item
See code
\item
See code
\end{enumerate}
\end{enumerate}
\end{document}